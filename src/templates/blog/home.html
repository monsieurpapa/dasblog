{% extends 'base.html' %}

{% load static %}

{% block content %}
  <div class="container-fluid px-0">
    <!-- Featured Post / Hero Section -->
    <section class="py-0 overflow-hidden" id="banner" data-bs-theme="light">
      <div class="bg-holder overlay" data-bg="{% static 'falcon/assets/img/generic/bg-1.jpg' %}">
      </div>
      <!--/.bg-holder-->

      <div class="container">
        <div class="row flex-center pt-8 pt-lg-10 pb-lg-9 pb-xl-0">
          <div class="col-md-11 col-lg-8 col-xl-4 pb-7 pb-xl-9 text-center text-xl-start"><a class="btn btn-outline-danger mb-4 fs--1 border-2 rounded-pill" href="#!"><span class="me-2" role="img" aria-label="Gift">üéÅ</span>Become a pro</a>
            <h1 class="text-white fw-light">Bring <span class="typed-text fw-bold" data-typed-text='["design","beauty","elegance","perfection"]'></span><br />to your blog</h1>
            <p class="lead text-white opacity-75">Knowledge is power. Information is liberating. Education is the premise of progress, in every society, in every family</p><a class="btn btn-outline-light border-2 rounded-pill btn-lg mt-4 fs-0 py-2" href="#!">Get Started with our blog here<span class="fas fa-play ms-2" data-fa-transform="shrink-6 down-1"></span></a>
          </div>
          <div class="col-xl-7 offset-xl-1 align-self-end mt-4 mt-xl-0"><a class="img-landing-banner rounded" href="{% url 'core:home' %}"><img class="img-fluid" src="{% static 'falcon/assets/img/generic/dashboard-alt.jpg' %}" alt="" /></a></div>
        </div>
      </div>
      <!-- end of .container-->

    </section>
    {% if featured_post %}
    <section class="py-5 bg-light rounded-3 mb-5 shadow-sm position-relative overflow-hidden">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-7">
            <h1 class="display-3 fw-bold mb-3">{{ featured_post.title }}</h1>
            <p class="lead mb-4">{{ featured_post.summary|truncatewords:30 }}</p>
            <a href="{{ featured_post.get_absolute_url }}" class="btn btn-primary btn-lg px-4">Read More</a>
          </div>
          <div class="col-md-5 text-center">
            {% if featured_post.featured_image %}
              <img src="{{ featured_post.featured_image.url }}" class="img-fluid rounded shadow-lg hero-img" alt="{{ featured_post.title }}" style="max-height: 350px; object-fit: cover;">
            {% endif %}
          </div>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Categories Navigation -->
    <div class="mb-4">
      <h5 class="mb-3">Categories</h5>
      <div class="d-flex flex-wrap gap-2">
        {% for category in categories %}
          <a href="{% url 'core:posts_by_category' category.slug %}" class="badge bg-secondary text-decoration-none p-2">{{ category.name }}</a>
        {% endfor %}
      </div>
    </div>

    <!-- Recent Posts Grid -->
    <div class="row">
      {% for post in recent_posts %}
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm border-0 hover-shadow">
          {% if post.featured_image %}
          <img src="{{ post.featured_image.url }}" class="card-img-top" alt="{{ post.title }}" style="height: 220px; object-fit: cover;">
          {% endif %}
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-semibold">{{ post.title }}</h5>
            <p class="card-text text-muted">{{ post.summary|truncatewords:20 }}</p>
            <a href="{{ post.get_absolute_url }}" class="btn btn-outline-primary mt-auto">Read More</a>
          </div>
          <div class="card-footer text-muted small d-flex justify-content-between align-items-center bg-white border-0">
            <span><i class="fas fa-user"></i> {{ post.author.username }}</span>
            <span><i class="far fa-calendar-alt"></i> {{ post.published_date|date:"M d, Y" }}</span>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12">
        <p>No posts available yet.</p>
      </div>
      {% endfor %}
    </div>
  </div>
  {% block extra_js %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const bgHolder = document.querySelector('.bg-holder.overlay');
      if (bgHolder) {
        const bgImage = bgHolder.getAttribute('data-bg');
        if (bgImage) {
          bgHolder.style.backgroundImage = `url('${bgImage}')`;
          bgHolder.style.backgroundPosition = 'center bottom';
        }
      }
    });
  </script>
  {% endblock %}
{% endblock %} 
  